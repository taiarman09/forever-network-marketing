<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TATA Employee Management</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="container">

        <div class="form-box">
            <h3>Add New</h3>

            <label>Name</label>
            <input type="text" id="name" placeholder="Name">

            <label>Number</label>
            <input type="tel" id="number" placeholder="mobile number">

            <label>Date Of Birth</label>
            <input type="datetime-local" id="Date">

            <label>Work Time</label>
            <input type="text" id="department" placeholder="Select">

            <select id="selectdepartment">
                <option value="">-- Select Time --</option>
                <option value="Full time">Full time</option>
                <option value="Part time">Part time</option>
            </select>

            <label>Address</label>
            <textarea id="address" style="width: 100%; padding-left: 10px; padding-top: 5px;" placeholder="City / Village"></textarea>

            <label>Email</label>
            <input type="email" id="email" placeholder="email">

            <button id="saveBtn">Save Employee</button>
            <a href="update.html"><button type="button">Update</button></a>
        </div>

    </div>

<script>

let nameField = document.getElementById("name");
let numberField = document.getElementById("number");
let DateField = document.getElementById("Date");
let departmentField = document.getElementById("department");
let selectDepartment = document.getElementById("selectdepartment");
let addressField = document.getElementById("address");
let emailField = document.getElementById("email");
let saveBtn = document.getElementById("saveBtn");

let employees = JSON.parse(localStorage.getItem("employees")) || [];
let editIndex = null;


// Select dropdown sync
selectDepartment.addEventListener("change", function () {
    departmentField.value = this.value;
});


// -------- EDIT LOAD --------
let storedEditIndex = localStorage.getItem("editIndex");

if (storedEditIndex !== null) {

    storedEditIndex = Number(storedEditIndex);

    let emp = employees[storedEditIndex];

    nameField.value = emp.name;
    numberField.value = emp.number;
    DateField.value = emp.Date ? emp.Date : "";
    departmentField.value = emp.department;
    addressField.value = emp.address;
    emailField.value = emp.email;

    editIndex = storedEditIndex;
    saveBtn.innerText = "Update Employee";

    localStorage.removeItem("editIndex");
}


// -------- SAVE / UPDATE --------
saveBtn.addEventListener("click", () => {

let name = nameField.value.trim();
let number = numberField.value.trim();
let Date = DateField.value.trim();
let department = departmentField.value.trim();
let address = addressField.value.trim();
let email = emailField.value.trim();

if (!name || !number || !Date || !department || !address || !email) {
    alert("Please fill all details!");
    return;
}

if (editIndex !== null) {
    employees[editIndex] = { name, number, Date, department, address, email };
} else {
    employees.push({ name, number, Date, department, address, email });
}

localStorage.setItem("employees", JSON.stringify(employees));
window.location.href = "update.html";

});

</script>

</body>
</html>
